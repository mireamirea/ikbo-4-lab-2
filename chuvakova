#include <stdio.h> 
#include <stdlib.h> 
#include <string.h> 

#define string 256 
#define movr 1
#define movl 2
#define inc 3
#define dec 4
#define print 5#define get 6
#define begin 7
#define end 8
#define printc 9

int main(int argc, char *argv[])  { 
	char *List[1000]; 
	char com[10];
	int i, place = 0, begend, counter = 0, j = 0;; 
	int n = 256; 
	char *tape; 
	FILE *f; 
	f = fopen("commands.txt", "r"); 
	for (i = 0; i < 1000; i++) 
		List[i] = (char*)malloc(n * sizeof(char)); 
	tape = (char*)malloc(n * sizeof(char)); 
	for (i = 0; i < n; i++) 
		tape[i] = 0; 
	i = 0; 
	while (fscanf(f, "%s", List[i]) == 1) 
	i++; 
	counter = i; 
	for (i = 0; i < counter; i++) 
	printf("%s\n", List[i]); 

	i = 0; 
	while (j < counter) { 
		if (place >= string) { 
			n += string; 
			tape = realloc(tape, n * sizeof(char)); 
		} 
		else 
		if (place < 0) { 
			n += string; 
			tape = realloc(tape, n * sizeof(char)); 
			memcpy(tape, tape + string, string); 
			place += string; 
		}		 
		int x;
		if (strstr("movr", List[j]))
			x = movr;
		if (strstr("movl", List[j]))
			x = movl;
		if (strstr("inc", List[j]))
			x = inc;
		if (strstr("dec", List[j]))
			x = dec;
		if (strstr("print", List[j]))
			x = print;
		if (strstr("get", List[j]))
			x = get;
		if (strstr("begin", List[j]))
			x = begin;
		if (strstr("end", List[j]))
			x = end;	
		if (strstr("printc", List[j]))					
			x = printc;		
		switch (x) {
			case movr :
				place++;
				break;
			case movl :
				place--;
				break;
			case inc :
				if (tape[place] == 255) { 
				printf("Overflow\n"); 
				tape[place] = 0; 
				} 
				else tape[place] = tape[place] + 1;
				break;
			case dec :
				if (tape[place] == 0)
				tape[place] = 0; 
				else 
				tape[place] = tape[place] - 1;
				break;
			case print :
				printf("%d\n", tape[place]); 
				break;
			case get :
				scanf("%d", &tape[place]); 
				break;
			case begin :
				if (tape[place] == 0) { 
				while (!strstr("end", List[j]))
					j++; 
				}		 
		    	else begend = j; 
				break;
			case end :
				if (tape[place] != 0)
				j = begend; 		 
				break;
			case printc :
				printf("%c", List[j]);
            			break;	 				 	 		
		}
		j++; 
	}
	fclose(f); 
	return 0; 
}

